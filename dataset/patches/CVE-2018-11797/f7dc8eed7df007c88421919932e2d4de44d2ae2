From f7dc8eed7df007c88421919932e2d4de44d2ae2f Mon Sep 17 00:00:00 2001
From: Tilman Hausherr <tilman@apache.org>
Date: Sat, 4 Aug 2018 17:29:43 +0000
Subject: [PATCH] PDFBOX-4283: treat invalid elements as 0

git-svn-id: https://svn.apache.org/repos/asf/pdfbox/branches/1.8@1837438 13f79535-47bb-0310-9956-ffa450edef68
---
 pdfbox/src/main/java/org/apache/pdfbox/cos/COSArray.java | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/pdfbox/src/main/java/org/apache/pdfbox/cos/COSArray.java b/pdfbox/src/main/java/org/apache/pdfbox/cos/COSArray.java
index e6d6dcdb2d5..4bd8d9fad8d 100644
--- a/pdfbox/src/main/java/org/apache/pdfbox/cos/COSArray.java
+++ b/pdfbox/src/main/java/org/apache/pdfbox/cos/COSArray.java
@@ -523,9 +523,11 @@ public Object accept(ICOSVisitor visitor) throws COSVisitorException
     public float[] toFloatArray()
     {
         float[] retval = new float[size()];
-        for( int i=0; i<size(); i++ )
+        for (int i = 0; i < size(); i++)
         {
-            retval[i] = ((COSNumber)getObject( i )).floatValue();
+            COSBase base = getObject(i);
+            retval[i] =
+                base instanceof COSNumber ? ((COSNumber) base).floatValue() : 0;
         }
         return retval;
     }
